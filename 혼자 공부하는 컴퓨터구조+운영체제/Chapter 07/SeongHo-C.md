<!--
bold 처리
** **

js 코드 작성
```js

```

링크
[보여질 단어](URL 주소)

형광펜 처리
` `
-->

## Chapter 07: 보조기억장치

<details>
<summary>Table of Contents</summary>

- 다양한 보조기억장치[:link:](#다양한-보조기억장치)
  - 하드 디스크[:link:](#하드-디스크)
  - 플래시 메모리[:link:](#플래시-메모리)
- RAID의 정의와 종류[:link:](#raid의-정의와-종류)
  - RAID의 정의[:link:](#raid의-정의)
  - RAID의 종류[:link:](#raid의-종류)
  </details>

### 다양한 보조기억장치

#### 하드 디스크

<img width="100" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/4bb5dbf5-af6d-4f8a-a2c0-7ed11626c9f2">

- 하드 디스크는 자기적인 방식으로 데이터를 저장하는 보조기억장치이다. 이 때문에 `자기 디스크(magnetic disk)`의 일종으로 지칭하기도 한다.
- 하드 디스크에서 실질적으로 데이터가 저장되는 곳은 위 그림 속 동그란 원판이다. 이를 `플래터`라고 한다.
  - 플래터는 자기 물질로 덮여 있어 수많은 N극과 S극을 저장한다. 이는 0과 1의 역할을 수행한다.
  - 플래터를 회전시키는 구성 요소를 `스핀들`이라고 한다. 스핀들이 플래터를 돌리는 속도는 분당 회전수를 나타내는 `RPM(Revolution Per Minute)`이라는 단위로 표현된다.
  - 플래터를 대상으로 데이터를 읽고 쓰는 구성 요소는 `헤드`다. 원하는 위치로 헤드를 이동시키는 `디스크 암`에 부착되어 있다.
- 플래터는 `트랙`과 `섹터`라는 단위로 데이터를 저장한다. 플래터를 여러 동심원으로 나누었을 때 그중 하나의 원을 트랙이라고 부른다. 그리고 트랙은 여러 조각을 나누어지는데, 이 한 조각을 섹터라고 부른다.
  - 섹터는 하드 디스크의 가장 작은 전송 단위이다.
  - 하나의 섹터는 일반적으로 512바이트 정도의 크기를 가지고 있지만, 정확한 크기는 하드 디스크에 따라 차이가 있다.
- 여러 겹의 플래터 상에서 같은 트랙이 위치한 곳을 모아 연결한 논리적 단위를 `실린더`라고 부른다.
  - 연속된 정보는 보통 한 실린더에 기록된다. 디스크 암을 움직이지 않고 바로 데이터에 접근할 수 있기 때문이다.
- 하드 디스크가 저장된 데이터에 접근하는 시간은 크게 `탐색 시간`, `회전 지연`, `전송 시간`으로 나뉜다.

  - `탐색 시간`은 접근하려는 데이터가 저장된 트랙까지 헤드를 이동시키는 시간을 의미한다.
  - `회전 지연`은 헤드가 있는 곳으로 플래터를 회전시키는 시간을 의미한다.
  - `전송 시간`은 하드 디스크와 컴퓨터 간에 데이터를 전송하는 시간을 의미한다.

  <img width="300" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/4f9f280d-0304-4cf9-8dc3-37cf50ddeccc">

#### 플래시 메모리

<img width="100" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/b8bb1eff-f519-4d7f-9eea-afca42aca427">
<img width="100" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/1ec456ba-7585-4025-ab98-6522d8656c4a">
<img width="100" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/2b301f92-22cd-4ac6-bdc7-edff37954968">

- 전기적으로 데이터를 읽고 쓸 수 있는 반도체 기반의 저장 장치이며, `셀`이라는 단위가 있다.
- 한 셀에 1비트를 저장할 수 있는 플래시 메모리를 `SLC` 타입, 한 셀에 2비트를 저장할 수 있는 플래시 메모리를 `MLC` 타입, 한 셀에 3비트를 저장할 수 있는 플래시 메모리를 `TLC` 타입이라고 한다.

  - 1️⃣ SLC 타입

    - 한 셀로 두 개의 정보를 표현할 수 있다.
    - MLC나 TLC 타입에 비해 비트의 빠른 입출력이 가능하고 수명도 길어서 수만에서 수십만 번 가까이 데이터를 쓰고 지우고를 반복할 수 있지만, SLC 타입은 용량 대비 가격이 높다.
    - 보통 기업에서 데이터를 읽고 쓰기가 매우 많이 반복되며 고성능의 빠른 저장 장치가 필요한 경우에 SLC 타입을 사용한다.

  - 2️⃣ MLC 타입

    - 한 셀로 네 개의 정보를 표현할 수 있다.
    - SLC 타입보다 일반적으로 속도와 수명은 떨어지지만, 한 셀에 두 비트씩 저장할 수 있다는 점에서 SLC 타입보다 대용화하기 유리하고 용량 대비 가격이 저렴하다.
    - 시중에서 사용되는 많은 플래시 메모리 저장 장치들이 MLC 타입(혹은 TLC 타입)으로 만들어진다.

  - 3️⃣ TLC 타입

    - 한 셀로 여덟 개의 정보를 표현할 수 있다.
    - 대용화 하기가 유리하며, 일반적으로 SLC나 MLC 타입보다 수명과 속도가 떨어지지만 용량 대비 가격도 저렴하다.

- 셀들이 모여 만들어진 단위를 `페이지`, 페이지가 모여 만들어진 단위를 `블록`, 블록이 모여 `플레인`, 플레인이 모여 `다이`가 된다.
- **읽기와 쓰기는 페이지 단위로 이루어진다. 하지만 삭제는 페이지보다 큰 블록 단위로 이루어진다.**
- 이때 페이지는 Free, Valid, Invalid 상태를 가질 수 있다.
  - `Free 상태`는 어떠한 데이터도 저장하고 있지 않아 새로운 데이터를 저장할 수 있는 상태
  - `Valid 상태`는 이미 유효한 데이터를 저장하고 있는 상태
  - `Invalid 상태`는 쓰레기값이라 부르는 유효하지 않은 데이터를 저장하고 있는 상태
- 하드 디스크와는 달리 덮어쓰기가 불가능하여 Valid 상태인 페이지에는 새 데이터를 저장할 수 없다. 그래서 최근 SSD를 비롯한 플래시 메모리는 이런 쓰레기 값을 정리하기 위해 `가비지 컬렉션` 기능을 제공한다.

  - 가비지 컬렉션은 유효한 페이지들만을 새로운 블록으로 복사한 뒤, 기존의 블록을 삭제하는 기능이다.

  <img width="400" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/0034f67d-e15c-490d-89af-4d1f8209153a">

### RAID의 정의와 종류

#### RAID의 정의

- 글로벌 IT 기업의 경우 매일 같이 수십, 수백 TB 데이터가 서버로 쏟아지고, 데이터에는 개인 정보, 결제 정보와 같이 절대로 잃어버려서는 안 될 민감한 정보도 포함되어 있다. 이런 정보를 안전하게 관리하기 위해 사용할 수 있는 방법 중 하나가 RAID이다.
- `RAID(Redundant Array of Independent Disks)`는 주로 하드 디스크와 SSD를 사용하는 기술로, 데이터의 안정성 혹은 높은 성능을 위해 여러 개의 물리적 보조기억장치를 마치 하나의 논리적 보조기억장치처럼 사용하는 기술을 의미한다.

#### RAID의 종류

여러 개의 하드 디스크나 SSD를 마치 하나의 장치처럼 사용하는 RAID를 구성하는 방법을 `RAID 레벨`이라 표현하는데, RAID 레벨에는 대표적으로 RAID 0 ~ 6이 있다.

1️⃣ RAID 0

- 여러 개의 보조기억장치에 데이터를 단순히 나누어 저장하는 구성 방식이다.
- 저장된 데이터가 하드 디스크 개수만큼 나뉘어 저장된다. 이때 마치 줄무늬처럼 분산되어 저장된 데이터를 `스트라입`이라 하고, 분산하여 저장하는 것을 `스트라이핑`이라고 한다.
- 스트라이핑되면 저장된 데이터를 읽고 쓰는 속도가 빨라진다. 하지만 저장된 정보가 안전하지 않다는 단점이 있다. RAID 0으로 구성된 하드 디스크 중 하나에 문제가 생긴다면 다른 모든 하드 디스크의 정보를 읽는 데 문제가 생길 수 있기 떄문이다.

2️⃣ RAID 1

- 복사본을 만드는 방식으로 `미러링`이라고도 부른다.
- RAID 1에 어떠한 데이터를 쓸 때는 원본과 복사본 두 군데에 쓴다. 그렇기에 쓰기 속도는 RAID 0보다 느리다.
- RAID 1 방식은 복구가 매우 간단하다는 장점이 있다. 하지만 하드 디스크 개수가 한정되었을 때 사용 가능한 용량이 적어지는 단점이 있다. 결국 많은 양의 하드 디스크가 필요하게 되고, 비용이 증가한다는 단점으로 이어진다.

3️⃣ RAID 4

- 오류를 검출하고 복구하기 위한 정보를 저장한 장치를 두는 구성 방식이다. 이때 '오류를 검출하고 복구하기 위한 정보'를 `패리티 비트`라고 한다.
- RAID 1보다 적은 하드 디스크로도 데이터를 안전하게 보관할 수 있다.

4️⃣ RAID 5

RAID 4에서는 어떤 새로운 데이터가 저장될 때마다 패리티를 저장하는 디스크에도 데이터를 쓰게되므로 패리티를 저장하는 장치에 병목 현상이 발생한다는 문제가 있다.

- 패리티 정보를 분산하여 저장하는 방식으로 RAID 4의 문제인 병목 현상을 해소한다.

5️⃣ RAID 6

- 기본적으로 RAID 5와 구성은 같으나, 서로 다른 두 개의 패리티를 두는 방식이다. 이는 오류를 검출하고 복구할 수 있는 수단이 두 개가 생긴 셈이다.
- 새로운 정보를 저장할 때마다 함께 저장할 패리티가 두 개이므로, 쓰기 속도는 RAID 5보다 느리다.
- 데이터 저장 속도를 조금 희생하더라도 데이터를 더욱 안전하게 보관하고 싶을 때 사용하는 방식이다.
