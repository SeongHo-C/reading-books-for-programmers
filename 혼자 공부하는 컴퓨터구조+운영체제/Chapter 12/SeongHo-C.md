<!--
bold 처리
** **

js 코드 작성
```js

```

링크
[보여질 단어](URL 주소)

형광펜 처리
` `
-->

## Chapter 12: 프로세스 동기화

<details>
<summary>Table of Contents</summary>

- 동기화란[:link:](#동기화란)

  - 동기화의 의미[:link:](#동기화의-의미)
  - 생산자와 소비자 문제[:link:](#생산자와-소비자-문제)
  - 공유 자원과 임계 구역[:link:](#공유-자원과-임계-구역)
  </details>

### 동기화란

#### 동기화의 의미

- `프로세스 동기화`란 프로세스들 사이의 수행 시기를 맞추는 것을 의미한다.
  - 실행 순서 제어: 동시에 실행되는 프로세스를 올바른 순서대로 실행하기
  - 상호 배제: 동시에 접근해서는 안 되는 자원에 하나의 프로세스만 접근하게 하기

#### 생산자와 소비자 문제

```js
총합 = 10

생산자() {
  버퍼에 데이터 삽입
  '총합' 변수 1 증가
}

소비자() {
  버퍼에서 데이터 빼내기
  '총합' 변수 1 감소
}
```

</br>

생산자 100,000번, 소비자 100,000번 동시에 실행

```js
// 소비자가 생산자의 작업이 끝나기도 전에 총합을 수정
초기 합계 : 10
producer, consumer 스레드 실행 이후 합계 : 63078
```

```js
// 생산자가 소비자의 작업이 끝나기도 전에 총합을 수정
초기 합계 : 10
producer, consumer 스레드 실행 이후 합계 : -13750
```

#### 공유 자원과 임계 구역

- 계좌 잔액 문제와 생산자 소비자 문제의 예시에서 동시에 실행되는 프로세스들은 전역 변수 '잔액', '총합'이라는 공동의 자원을 두고 작업을 했다. 이러한 자원을 `공유 자원`이라고 한다. 공유 자원은 전역 변수가 될 수도 있고, 파일이 될 수도 있고, 입출력장치, 보조기억장치가 될 수도 있다.
- 동시에 실행하면 문제가 발생하는 자원에 접근하는 코드 영역을 `임계 구역`이라고 한다.
- 임계 구역은 두 개 이상의 프로세스가 동시에 실행하면 안 되는 영역이지만, 잘못된 실행으로 인해 여러 프로세스가 동시 다발적으로 임계 구역의 코드를 실행하여 문제가 발생하는 경우가 있다. 이를 `레이스 컨디션`이라고 한다.

**`레이스 컨디션이 발생하는 근본적인 이유?`** </br>
컴퓨터는 고급 언어가 아닌 저급 언어를 실행하기 때문에 여러 줄의 저급 언어로 변환된 고급 언어 한 줄을 실행하는 과정에서 문맥 교환이 일어날 수 있다. 저급 언어를 실행하는 과정에서 문맥 교환이 일어난다면 레이스 컨디션이 발생한다.

운영체제는 이러한 임계 구역 문제를 아래 세 가지 원칙 하에 해결한다.

- `상호 배제`: 한 프로세스가 임계 구역에 진입했다면 다른 프로세스는 임계 구역에 들어올 수 없다.
- `진행`: 임계 구역에 어떤 프로세스도 진입하지 않았다면 임계 구역에 진입하고자 하는 프로세스는 들어갈 수 있어야 한다.
- `유한 대기`: 한 프로세스가 임계 구역에 진입하고 싶다면 그 프로세스는 언젠가는 임계 구역에 들어올 수 있어야 한다(임계 구역에 들어오기 위해 무한정 대기해서는 안 된다).
