<!--
bold 처리
** **

js 코드 작성
```js

```

링크
[보여질 단어](URL 주소)

형광펜 처리
` `

글자색
<span style="color:red"> </span>
-->

## Chapter 13: 교착 상태

<details>
<summary>Table of Contents</summary>

- 교착 상태란[:link:](#교착-상태란)
  - 식사하는 철학자 문제[:link:](#식사하는-철학자-문제)
  - 자원 할당 그래프[:link:](#자원-할당-그래프)
  - 교착 상태 발생 조건[:link:](#교착-상태-발생-조건)
  </details>

### 교착 상태란

#### 식사하는 철학자 문제

<img width="200" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/65096e2c-1ece-4684-a876-7573a358987b">

- 동그란 원탁에 다섯 명의 철학자가 앉아 있다. 이 철학자들 앞에는 맛있는 식사가 있고, 철학자들 사이 사이에는 식사에 필요한 포크가 있다. 그리고 철학자들 앞에 있는 식사는 두 개의 포크로 먹을 수 있는 음식이라 가정한다.
- 위 상황에서 모든 철학자가 동시에 포크를 집어 식사를 하면 어떤 철학자도 식사를 할 수 없고 영원히 생각만 하는 상황이 발생할 수 있다. 모든 철학자가 왼쪽 포크를 집어들면 모두가 오른쪽 포크를 집어들 수 없기 때문이다. 다시 말해 모든 철학자는 다른 철학자가 포크를 내려놓을 때까지 기다린다. 이렇게 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상을 `교착 상태`라고 한다.
- 이러한 교착 상태를 해결하기 위해서는 첫째, 교착 상태가 발생했을 때의 상황을 정확히 표현해 보고, 둘째, 교착 상태가 일어나는 근본적인 이유에 대해 알아야 한다.

#### 자원 할당 그래프

- 교착 상태는 `자원 할당 그래프`를 통해 단순하게 표현할 수 있다. 자원 할당 그래프는 어떤 프로세스가 어떤 자원을 사용하고 있고, 또 어떤 프로세스가 어떤 자원을 기다리고 있는지를 표현하는 간단한 그래프다.
- 자원 할당 그래프는 아래와 같은 규칙으로 그려진다. </br>
  `첫째, 프로세스는 원으로, 자원의 종류는 사각형으로 표현한다.` </br>
  `둘째, 사용할 수 있는 자원의 개수는 자원 사각형 내에 점으로 표현한다.` </br>
  `셋째, 프로세스가 어떤 자원을 할당받아 사용 중이라면 자원에서 프로세스를 향해 화살표를 표시한다.` </br>
  `넷째, 프로세스가 어떤 자원을 기다리고 있다면 프로세스에서 자원으로 화살표를 표시한다.` </br>
- 교착 상태가 발생한 상황은 자원 할당 그래프가 원의 형태를 띄고 있다.

#### 교착 상태 발생 조건

교착 상태가 발생할 조건에는 `상호 배제`, `점유와 대기`, `비선점`, `원형 대기`가 있다. 즉, 다음 조건 중 하나라도 만족하지 않는다면 교착 상태가 발생하지 않지만, 다음 조건이 모두 만족될 때 교착 상태가 발생할 가능성이 생긴다고 보면 된다.

- 상호 배제 </br>
  한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없을 때, 즉 `상호 배제` 상황에서 교착 상태가 발생할 수 있다.

- 점유와 대기 </br>
  어떠한 자원을 할당받은 상태에서 다른 자원을 할당받기를 기다린다면 교착 상태가 발생할 수 있다. 이렇게 '자원을 할당받은 상태에서 다른 자원을 할당받기를 기다리는 상태'를 `점유와 대기`라고 한다.

- 비선점 </br>
  비선점 자원은 그 자원을 이용하는 프로세스의 작업이 끝나야만 비로소 이용할 수 있다. 즉, 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 못했기 때문에 교착 상태가 발생했다고 볼 수 있다.

- 원형 대기 </br>
  자원 할당 그래프가 원의 형태로 그려지면 교착 상태가 발생할 수 있다. 이렇게 프로세스들이 원의 형태로 자원을 대기하는 것을 `원형 대기`라고 한다. </br>
  🎈 <span style="color:red">원의 형태를 띈다고 해서 반드시 교착 상태가 발생하는 것은 아니다.</span>
