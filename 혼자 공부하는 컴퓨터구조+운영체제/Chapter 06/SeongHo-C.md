<!--
bold 처리
** **

js 코드 작성
```js

```

링크
[보여질 단어](URL 주소)

형광펜 처리
` `
-->

## Chapter 06: 메모리와 캐시 메모리

<details>
<summary>Table of Contents</summary>

- RAM의 특징과 종류
  - RAM의 특징[:link:](#ram의-특징)
  - RAM의 용량과 성능[:link:](#ram의-용량과-성능)
  - RAM의 종류[:link:](#ram의-종류)
- 메모리의 주소 공간[:link:](#메모리의-주소-공간)
  - 물리 주소와 논리 주소[:link:](#물리-주소와-논리-주소)
  - 메모리 보호 기법[:link:](#메모리-보호-기법)
  </details>

### RAM의 특징과 종류

#### RAM의 특징

- RAM에는 실행할 프로그램의 명령어와 데이터가 저장된다.
- 중요한 점은 전원을 끄면 RAM에 저장된 명령어와 데이터가 모두 날아간다는 것이다. 이렇게 전원을 끄면 저장된 내용이 사라지는 저장 장치를 `휘발성 저장 장치`라고 한다.
- CPU는 보조기억장치에 직접 접근하지 못한다. 그렇기 때문에 CPU가 실행하고 싶은 프로그램이 보조기억장치에 있다면 이를 RAM으로 복사하여 저장한 뒤 실행한다.

#### RAM의 용량과 성능

  <img width="400" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/66e54a70-6773-4cb3-a399-eccb91ad97c6">

- RAM 용량이 프로그램 A, B, C 중 하나만 저장할 수 있을 만큼 작다면 CPU가 프로그램 A를 실행하고 싶을 때는 보조기억장치에서 프로그램 A를 RAM으로 가지고 오고, 프로그램 B를 실행하고 싶을 때는 다시 프로그램 B를 RAM으로 가지고 오고, 프로그램 C를 실행하고 싶을 때는 또 다시 프로그램 C를 RAM으로 가지고 와야 한다.

<br>

<img width="400" alt="image" src="https://github.com/SeongHo-C/reading-books-for-programmers/assets/83394485/641356b4-525a-4e14-8de2-34c5627d2c6c">

- RAM 용량이 충분히 크다면 보조기억장치에서 많은 데이터를 가져와 미리 RAM에 저장할 수 있다. 그렇기 때문에 많은 프로그램을 동시에 실행하는 데 유리하다.
- RAM 용량이 커지면 프로그램 실행 속도가 어느 정도 증가하는 것은 맞지만, 용량이 필요 이상으로 커졌을 때 속도가 그에 비례하여 증가하지는 않는다.

#### RAM의 종류

RAM의 종류는 크게 **DRAM, SRAM, SDRAM, DDR SDRAM**이 있다.

1️⃣ DRAM(Dynamic RAM)

- 시간이 지나면 저장된 데이터가 점차 사라지는 RAM이다. 그렇기에 데이터의 소멸을 막기 위해 일정 주기로 데이터를 `재활성화(다시 저장)`해야 한다.
- 소비 전력이 비교적 낮고, 저렴하고, 집적도가 높기 때문에 대용량으로 설계하기가 용이하다. 이러한 이유로 우리가 일반적으로 메모리로써 사용하는 RAM은 DRAM이다.

2️⃣ SRAM(Static RAM)

- 시간이 지나면 점차 저장된 내용이 소실되는 DRAM과는 달리 SRAM은 시간이 지나도 저장된 데이터가 사라지지 않는다.
- 주기적으로 데이터를 재활성화할 필요가 없고, DRAM보다 일반적으로 속도가 더 빠르다.
- DRAM보다 집적도가 낮고, 소비 전력도 크며, 가격도 더 비싸다. 그래서 SRAM은 메모리가 아닌 '대용량으로 만들어질 필요는 없지만 속도가 빨라야 하는 저장 장치', 가령 `캐시 메모리`에서 사용된다.

3️⃣ SDRAM(Synchronous Dynamic RAM)

- 클럭 신호와 동기화된, 발전된 형태의 DRAM이다.
- 클럭에 맞춰 동작하며 클럭마다 CPU와 정보를 주고받을 수 있는 DRAM이다.

4️⃣ DDR SDRAM(Double Data Rate SDRAM)

- `대역폭(데이터를 주고받는 길의 너비)`을 넓혀 속도를 빠르게 만든 SDRAM이다.
- 한 클럭에 한 번씩 CPU와 데이터를 주고받을 수 있는 SDRAM에 비해 두 배의 대역폭으로 한 클럭당 두 번씩 CPU와 데이터를 주고 받을 수 있다. 전송 속도 또한 두 배가량 빠르다.
- 최근에 흔히 사용되는 메모리는 DDR4 SDRAM으로, SDR SDRAM(SDRAM)보다 열여섯 배 넓은 대역폭을 가진다.

### 메모리의 주소 공간

#### 물리 주소와 논리 주소

- CPU와 메모리에 저장되어 실행중인 프로그램은 메모리 몇 번지에 무엇이 저장되어 있는지 다 알지 못한다. 그 이유는 메모리에 저장된 정보는 시시각각 변하기 때문이다.
- 주소에는 메모리가 사용하는 `물리 주소`가 있고, CPU와 실행 중인 프로그램이 사용하는 `논리 주소`가 있다.
  - 물리 주소: 정보가 실제로 저장된 하드웨어상의 주소
  - 논리 주소: 실행 중인 프로그램 각각에게 부여된 0번지부터 시작되는 주소
- CPU가 메모리와 상호작용하려면 **논리 주소와 물리 주소 간의 변환**이 이루어져야 한다.
  - CPU와 주소 버스 사이에 위치한 `메모리 관리 장치(이하 MMU)`라는 하드웨어에 의해 수행된다.
  - MMU는 CPU가 발생시킨 논리 주소에 `베이스 레지스터(프로그램의 가장 작은 물리 주소) 값`을 더하여 논리 주소를 물리 주소로 변환한다.

#### 메모리 보호 기법

- 논리 주소 범위를 벗어나는 명령어 실행을 방지하고 실행 중인 프로그램이 다른 프로그램에 영향을 받지 않도록 보호할 방법이 필요하다. 이는 `한계 레지스터(논리 주소의 최대 크기를 저장)`가 담당한다.
- 프로그램의 물리 주소 범위는 베이스 레지스터 값 이상, 베이스 레지스터 값 + 한계 레지스터 값 미만이 된다.
- CPU가 한계 레지스터보다 높은 논리 주소에 접근하려고 하면 인터럽트(트랩)를 발생시켜 실행을 중단한다.
